<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Advanced usage | Kano</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="https://s3.eu-central-1.amazonaws.com/kalisioscope/kano/kano-icon-64x64.png">
    <link rel="manifest" href="/kano/manifest.json">
    <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
    <meta name="description" content="A powerful real-time Geovisualizer">
    
    <link rel="preload" href="/kano/assets/css/0.styles.d1ec09a8.css" as="style"><link rel="preload" href="/kano/assets/js/app.1b27ae55.js" as="script"><link rel="preload" href="/kano/assets/js/3.73723b4e.js" as="script"><link rel="preload" href="/kano/assets/js/20.d58c7e15.js" as="script"><link rel="preload" href="/kano/assets/js/5.cf96d9c0.js" as="script"><link rel="prefetch" href="/kano/assets/js/10.4f94ac3f.js"><link rel="prefetch" href="/kano/assets/js/11.8b3f1c12.js"><link rel="prefetch" href="/kano/assets/js/12.1c45dcab.js"><link rel="prefetch" href="/kano/assets/js/13.065455cd.js"><link rel="prefetch" href="/kano/assets/js/14.8dddbf11.js"><link rel="prefetch" href="/kano/assets/js/15.08b31a2e.js"><link rel="prefetch" href="/kano/assets/js/16.0f9e037c.js"><link rel="prefetch" href="/kano/assets/js/17.f5bd28a7.js"><link rel="prefetch" href="/kano/assets/js/18.69c2f844.js"><link rel="prefetch" href="/kano/assets/js/19.c602178f.js"><link rel="prefetch" href="/kano/assets/js/2.def827b9.js"><link rel="prefetch" href="/kano/assets/js/21.da63df49.js"><link rel="prefetch" href="/kano/assets/js/22.dd80c8b2.js"><link rel="prefetch" href="/kano/assets/js/23.91d7fb10.js"><link rel="prefetch" href="/kano/assets/js/24.a773c2f2.js"><link rel="prefetch" href="/kano/assets/js/25.22f883fd.js"><link rel="prefetch" href="/kano/assets/js/26.e2e80dd0.js"><link rel="prefetch" href="/kano/assets/js/4.366e64e8.js"><link rel="prefetch" href="/kano/assets/js/6.7ff2cb4e.js"><link rel="prefetch" href="/kano/assets/js/7.4450af35.js"><link rel="prefetch" href="/kano/assets/js/8.3c4b0630.js"><link rel="prefetch" href="/kano/assets/js/9.4e38fd8c.js">
    <link rel="stylesheet" href="/kano/assets/css/0.styles.d1ec09a8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kano/" class="home-link router-link-active"><!----> <span class="site-name">Kano</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/kano/about/introduction.html" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/kano/guides/understanding-kano.html" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/kano/reference/configuration.html" class="nav-link">
  Reference
</a></div><div class="nav-item"><a href="https://github.com/kalisio/kano" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/kano/about/introduction.html" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/kano/guides/understanding-kano.html" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/kano/reference/configuration.html" class="nav-link">
  Reference
</a></div><div class="nav-item"><a href="https://github.com/kalisio/kano" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <p align="center"><a href="https://kalisio.com"><img src="https://s3.eu-central-1.amazonaws.com/kalisioscope/kalisio/kalisio-logo-black-256x84.png"></a> <br> <!----></p> <ul class="sidebar-links"><li><a href="/kano/guides/understanding-kano.html" class="sidebar-link">Understanding Kano</a></li><li><a href="/kano/guides/getting-started.html" class="sidebar-link">Getting Started</a></li><li><a href="/kano/guides/installing-kano.html" class="sidebar-link">Installing Kano</a></li><li><a href="/kano/guides/customizing-kano.html" class="sidebar-link">Customizing Kano</a></li><li><a href="/kano/guides/advanced-usage.html" aria-current="page" class="active sidebar-link">Advanced usage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kano/guides/advanced-usage.html#integrating-kano" class="sidebar-link">Integrating Kano</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kano/guides/advanced-usage.html#accessing-the-underlying-api" class="sidebar-link">Accessing the underlying API</a></li></ul></li><li class="sidebar-sub-header"><a href="/kano/guides/advanced-usage.html#developing-in-kano" class="sidebar-link">Developing in Kano</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kano/guides/advanced-usage.html#add-components" class="sidebar-link">Add components</a></li><li class="sidebar-sub-header"><a href="/kano/guides/advanced-usage.html#add-custom-code" class="sidebar-link">Add custom code</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="advanced-usage"><a href="#advanced-usage" class="header-anchor">#</a> Advanced usage</h1> <h2 id="integrating-kano"><a href="#integrating-kano" class="header-anchor">#</a> Integrating Kano</h2> <p>To avoid the burden of developing a completely new application for every mapping needs you might have, <strong>Kano</strong> provides you with the capabilities to be integrated in your web application as an <a href="https://en.wikipedia.org/wiki/HTML_element#Frames" target="_blank" rel="noopener noreferrer"><code>&lt;iframe/&gt;</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> like this:</p> <div><iframe id="kano" title="Kano" allow="geolocation *" allowfullscreen="allowfullscreen" frameBorder="0" src="https://kano.dev.kalisio.xyz" style="width:100%;height:50vh;"></iframe></div> <p>This <strong>iframe</strong> offers an API so that you can dynamically control the behaviour and the content of Kano, as well as how the embedding application reacts in real-time to changes in Kano, a.k.a <a href="https://medium.com/@tomsoderlund/micro-frontends-a-microservice-approach-to-front-end-web-development-f325ebdadc16" target="_blank" rel="noopener noreferrer">micro frontend<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. You can read more about the underlying concepts in this <a href="https://blog.feathersjs.com/a-use-case-of-microservices-with-feathersjs-building-a-geospatial-platform-56373604db71" target="_blank" rel="noopener noreferrer">article<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>The <a href="/kano/reference/api.html">API</a> is a subset of the internal Kano components and uses <a href="https://github.com/krakenjs/post-robot" target="_blank" rel="noopener noreferrer">post-robot<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to</p> <ol><li>select which is the target component
<ul><li>event name = <code>map</code> for 2D map and <code>globe</code> for 3D globe</li></ul></li> <li>transform external method calls to internal calls using the following event payload
<ul><li>the <code>command</code> property is the mixin method name (e.g. <code>isLayerVisible</code>)</li> <li>the <code>args</code> property is the expected method arguments (e.g. a string, an object or an array when multiple arguments are required)</li></ul></li> <li>retrieve internal method call result externally
<ul><li>event response <code>data</code> is the method result object</li></ul></li> <li>retrieve internal property externally
<ul><li>event response <code>data</code> is the returned property value</li></ul></li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Event messaging using <strong>post-robot</strong> is always async because it relies on the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage" target="_blank" rel="noopener noreferrer">postMessage API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> under-the-hood.</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>In-memory data exchange is Json and more specifically GeoJson for map features. Do not try to inject functions or &quot;complex&quot; objects (e.g. class instances) in event payloads.</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>You must use the same version of the <strong>post-robot</strong> library as the one used by <strong>Kano</strong>. For now, <strong>Kano</strong> relies on the <code>10.0.42</code> version of <strong>post-robot</strong>.</p></div> <p>In addition to the events used to access mixin methods there are a couple of dedicated events:</p> <ul><li><code>kano-ready</code>: to be listened by integrating application to know when the Kano application has been initialized in the iframe so that you can safely use the iframe API</li> <li><code>api-ready</code>: to be listened by integrating application to know when the Kano backend connection has been initialized in the iframe so that you can safely call the backend API</li> <li><code>setLocalStorage</code>: listened by Kano to set key/value pairs (provided as event data payload) in its local storage, typically useful to inject access tokens</li> <li><code>setConfiguration</code>: listened by Kano to set key/value pairs to override its configuration, typically useful to configure available components or actions</li> <li><code>kano-login</code>: to be listened by integrating application to know when the user has been authenticated in the Kano application</li> <li><code>kano-logout</code>: to be listened by integrating application to know when the user has been unauthenticated in the Kano application</li> <li><code>map-ready</code>: to be listened by integrating application to know when the 2D map component has been initialized in the Kano application so that you can safely use the underlying API</li> <li><code>map-destroyed</code>: to be listened by integrating application to know when the 2D map component has been destroyed in the Kano application before switching to another route</li> <li><code>globe-ready</code>: to be listened by integrating application to know when the 3D globe component has been initialized in the Kano application so that you can safely use the underlying API</li> <li><code>globe-destroyed</code>: to be listened by integrating application to know when the 3D globe component has been destroyed in the Kano application before switching to another route</li> <li><code>layer-added</code>: to be listened by integrating application to know whenever a new layer has been added to the 2D/3D map (from the internal catalog or externally)</li> <li><code>layer-removed</code>: to be listened by integrating application to know whenever a layer has been removed from the 2D/3D map</li> <li><code>layer-shown</code>: to be listened by integrating application to know whenever a layer has been shown in the 2D/3D map</li> <li><code>layer-hidden</code>: to be listened by integrating application to know whenever a new layer has been hidden in the 2D/3D map</li> <li><code>click</code>: to be listened by integrating application to know whenever a feature has been clicked on a layer in the 2D/3D map, will provide the <code>feature</code> and <code>layer</code> (descriptor) as data payload properties</li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>You should add a listener for each of the above events in your application, even if you don't need to do any processing, otherwise the <strong>post-robot</strong> library will raise a warning.</p></div> <p>Here is a simple code sample:</p> <div class="language-html extra-class"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/post-robot@10.0.10/dist/post-robot.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>kano<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Kano<span class="token punctuation">&quot;</span></span> <span class="token attr-name">allow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>geolocation *<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 1024px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 768px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>kano.kalisio.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	  <span class="token keyword">var</span> kano <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'kano'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>contentWindow
	  <span class="token comment">// Wait for Kano to be initialized</span>
	  postRobot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'kano-ready'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	  	<span class="token comment">// Optionnaly overrides default setup of Kano</span>
	  	postRobot<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>kano<span class="token punctuation">,</span> <span class="token string">'setConfiguration'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">'appName'</span><span class="token operator">:</span> <span class="token string">'xxx'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
	  	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		  <span class="token comment">// Optionnaly set a valid token to avoid authentication</span>
		  <span class="token keyword">return</span> postRobot<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>kano<span class="token punctuation">,</span> <span class="token string">'setLocalStorage'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">'kano-jwt'</span><span class="token operator">:</span> <span class="token string">'xxx'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	  	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		  <span class="token comment">// Show and zoom to a layer</span>
		  <span class="token keyword">return</span> postRobot<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>kano<span class="token punctuation">,</span> <span class="token string">'map'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">command</span><span class="token operator">:</span> <span class="token string">'showLayer'</span><span class="token punctuation">,</span> <span class="token literal-property property">args</span><span class="token operator">:</span> <span class="token string">'Layer name'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	      <span class="token keyword">return</span> postRobot<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>kano<span class="token punctuation">,</span> <span class="token string">'map'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">command</span><span class="token operator">:</span> <span class="token string">'zoomToLayer'</span><span class="token punctuation">,</span> <span class="token literal-property property">args</span><span class="token operator">:</span> <span class="token string">'Layer name'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
	    <span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	      <span class="token keyword">return</span> postRobot<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>kano<span class="token punctuation">,</span> <span class="token string">'map'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">property</span><span class="token operator">:</span> <span class="token string">'layers'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
	    <span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Layer list'</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
	    <span class="token punctuation">}</span><span class="token punctuation">)</span>
	  <span class="token punctuation">}</span><span class="token punctuation">)</span>
	</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>A full sample exploring the different ways to interact with the API is provided <a href="https://github.com/kalisio/kano/blob/master/src/statics/iframe.html" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. When running the demo you can dynamically call API methods when toggling the different buttons on the left.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Depending on the configuration of your Kano instance some features might not work as expected in the sample as it relies on some specific layers to exist.</p></div> <h3 id="accessing-the-underlying-api"><a href="#accessing-the-underlying-api" class="header-anchor">#</a> Accessing the underlying API</h3> <p>You can access the backend API using either the <a href="https://docs.feathersjs.com/api/client.html" target="_blank" rel="noopener noreferrer">Feathers client<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or raw HTTP REST requests. However, in order to ease integration you can also access the backend API through the iframe API. For this simply target the <code>api</code> component using <a href="https://github.com/krakenjs/post-robot" target="_blank" rel="noopener noreferrer">post-robot<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, which transform external method calls to internal calls using the following event payload:</p> <ul><li>the <code>service</code> property is the target service name (e.g. <code>catalog</code>)</li> <li>the <code>operation</code> property is the target service operation name (among <code>get</code>, <code>find</code>, <code>update</code>, <code>patch</code>, <code>remove</code>)</li> <li>the <code>args</code> property is the expected <a href="https://docs.feathersjs.com/api/services.html#service-methods" target="_blank" rel="noopener noreferrer">service operation arguments<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>Event response <code>data</code> is the method result object. In addition to the event used to access service operations the <code>api-ready</code> event is to be listened by integrating application to know when the Kano backend API has been initialized in the iframe so that you can safely use it.</p> <p>Here is a simple code sample:</p> <div class="language-html extra-class"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/post-robot@10.0.10/dist/post-robot.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>kano<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Kano<span class="token punctuation">&quot;</span></span> <span class="token attr-name">allow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>geolocation *<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 1024px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 768px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>kano.kalisio.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> kano <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'kano'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>contentWindow
    <span class="token comment">// Wait for map to be initialized</span>
    postRobot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'map-ready'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Request saved user contexts and activate the first one if any</span>
      postRobot<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>kano<span class="token punctuation">,</span> <span class="token string">'api'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">service</span><span class="token operator">:</span> <span class="token string">'catalog'</span><span class="token punctuation">,</span> <span class="token literal-property property">operation</span><span class="token operator">:</span> <span class="token string">'find'</span><span class="token punctuation">,</span> <span class="token literal-property property">args</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'Context'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> response <span class="token operator">=</span> result<span class="token punctuation">.</span>data
        <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>total <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> postRobot<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>kano<span class="token punctuation">,</span> <span class="token string">'map'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">command</span><span class="token operator">:</span> <span class="token string">'loadContext'</span><span class="token punctuation">,</span> <span class="token literal-property property">args</span><span class="token operator">:</span> response<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="developing-in-kano"><a href="#developing-in-kano" class="header-anchor">#</a> Developing in Kano</h2> <p><strong>Kano</strong> is powered by the <a href="https://kalisio.github.io/kdk" target="_blank" rel="noopener noreferrer">KDK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and rely on its main abstractions. If you'd like to develop an application based on Kano or extend Kano we assume you are familiar with this technology. Indeed, <strong>Kano</strong> is based on the <strong>KDK</strong> and makes the best use of all the features offered by the provided <a href="/kano/reference/api.html">cartographic components and services</a>.</p> <h3 id="add-components"><a href="#add-components" class="header-anchor">#</a> Add components</h3> <p>The most simple way to develop in Kano is to design and integrate your own components in the 2D or 3D activity. For this you simply have to</p> <ol><li>Put you single-file component(s) in the <code>src/components</code> folder (e.g. <code>MyComponent.vue</code>)</li> <li>Update the <a href="/kano/reference/configuration.html">configuration</a> to declare your component(s) in the 2D/3D activity by adding a <code>local.js</code> in the <code>config</code> folder like this:</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mapActivity</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// Can also be globeActivity</span>
    <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'my-component'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token string">'layout/KPageSticky'</span><span class="token punctuation">,</span> <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">'left'</span><span class="token punctuation">,</span> <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token string">'MyComponent'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then build/run the application as usual.</p> <p>The component file should look e.g. like this:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q-dialog</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDialog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>q-dialog</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q-btn</span> <span class="token attr-name">round</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>edit_location<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDialog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>q-btn</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'my-component'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'kMap'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">showDialog</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myDialog<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onTimeChanged</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// To be aware of time change</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>kMap<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'current-time-changed'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onTimeChanged<span class="token punctuation">)</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeUnmount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>kMap<span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span><span class="token string">'current-time-changed'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onTimeChanged<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
// Required translations in JSON format
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i18n</span><span class="token punctuation">&gt;</span></span>
{ 
  &quot;fr&quot;: {
      ...
    }
  },
  &quot;en&quot;: {
      ...
    }
  }
}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i18n</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>It's also possible to create separated i18n files if you'd like, simply put your <code>plugin_en.json</code>, <code>plugin_fr.json</code>, etc. files in the <code>src/i18n</code> folder before building the app.</p> <h3 id="add-custom-code"><a href="#add-custom-code" class="header-anchor">#</a> Add custom code</h3> <p>You can update the <code>plugin.js</code> entry point in the <code>boot</code> folder in order to insert your own features (functions, mixins, etc.). If you'd like to enhance the default activities provided by kano you can register your own mixins in this file by using the <strong>mixin store</strong>:</p> <div class="language- extra-class"><pre class="language-text"><code>import { MixinStore } from '../mixin-store'
import myMixin from '../my-mixin.js'

MixinStore.set('my-mixin', myMixin)
</code></pre></div><p>Then add it to the configuration of the target activity in order to make Kano apply it automatically:</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mapActivity</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// Can also be globeActivity</span>
    <span class="token literal-property property">additionalMixins</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'my-mixin'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/kano/guides/customizing-kano.html" class="prev">
        Customizing Kano
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/kano/assets/js/app.1b27ae55.js" defer></script><script src="/kano/assets/js/3.73723b4e.js" defer></script><script src="/kano/assets/js/20.d58c7e15.js" defer></script><script src="/kano/assets/js/5.cf96d9c0.js" defer></script>
  </body>
</html>
