import{_ as s,o as a,c as n,Q as o}from"./chunks/framework.f7d371db.js";const C=JSON.parse('{"title":"Installing services","description":"","frontmatter":{"sidebarDepth":3},"headers":[],"relativePath":"guides/installing-services.md","filePath":"guides/installing-services.md"}'),l={name:"guides/installing-services.md"},p=o(`<h1 id="installing-services" tabindex="-1">Installing services <a class="header-anchor" href="#installing-services" aria-label="Permalink to &quot;Installing services&quot;">​</a></h1><h2 id="using-kargo" tabindex="-1">Using Kargo <a class="header-anchor" href="#using-kargo" aria-label="Permalink to &quot;Using Kargo&quot;">​</a></h2><p>You can easily connect Kano with geospatial services deployed by <a href="https://kalisio.github.io/kargo/" target="_blank" rel="noreferrer">Kargo</a> through its <a href="https://kalisio.github.io/kargo/guides/advanced-usage.html#using-the-api-gateway" target="_blank" rel="noreferrer">API gateway</a>. First add the Kano application/consumer in the gateway configuration by generating a <a href="https://www.uuidgenerator.net/" target="_blank" rel="noreferrer">UUID</a>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">users: {</span></span>
<span class="line"><span style="color:#e1e4e8;">  my_user: {</span></span>
<span class="line"><span style="color:#e1e4e8;">    &#39;kano&#39;: {</span></span>
<span class="line"><span style="color:#e1e4e8;">      scopes: [&#39;wms&#39;, &#39;wmts&#39;, &#39;tms&#39;, &#39;wfs&#39;, &#39;wcs&#39;, &#39;k2&#39;],</span></span>
<span class="line"><span style="color:#e1e4e8;">      credential: {</span></span>
<span class="line"><span style="color:#e1e4e8;">        type: &#39;jwt&#39;,</span></span>
<span class="line"><span style="color:#e1e4e8;">        keyId: &#39;9ba09ead-23e1-4020-9994-aa9130782b09&#39;,</span></span>
<span class="line"><span style="color:#e1e4e8;">        keySecret: &#39;\${APP_SECRET}&#39;</span></span>
<span class="line"><span style="color:#e1e4e8;">      }</span></span>
<span class="line"><span style="color:#e1e4e8;">    }</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">users: {</span></span>
<span class="line"><span style="color:#24292e;">  my_user: {</span></span>
<span class="line"><span style="color:#24292e;">    &#39;kano&#39;: {</span></span>
<span class="line"><span style="color:#24292e;">      scopes: [&#39;wms&#39;, &#39;wmts&#39;, &#39;tms&#39;, &#39;wfs&#39;, &#39;wcs&#39;, &#39;k2&#39;],</span></span>
<span class="line"><span style="color:#24292e;">      credential: {</span></span>
<span class="line"><span style="color:#24292e;">        type: &#39;jwt&#39;,</span></span>
<span class="line"><span style="color:#24292e;">        keyId: &#39;9ba09ead-23e1-4020-9994-aa9130782b09&#39;,</span></span>
<span class="line"><span style="color:#24292e;">        keySecret: &#39;\${APP_SECRET}&#39;</span></span>
<span class="line"><span style="color:#24292e;">      }</span></span>
<span class="line"><span style="color:#24292e;">    }</span></span>
<span class="line"><span style="color:#24292e;">  }</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><p>Then add the following environment variables before launching the Kano backend:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Setup</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">target</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gateway</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> API_GATEWAY_URL</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;https://api.your.kargo.domain&quot;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> APP_ID</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;9ba09ead-23e1-4020-9994-aa9130782b09&quot;</span></span>
<span class="line"><span style="color:#B392F0;">yarn</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dev</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Setup</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">target</span><span style="color:#24292E;"> </span><span style="color:#032F62;">gateway</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> API_GATEWAY_URL</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;https://api.your.kargo.domain&quot;</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> APP_ID</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;9ba09ead-23e1-4020-9994-aa9130782b09&quot;</span></span>
<span class="line"><span style="color:#6F42C1;">yarn</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dev</span></span></code></pre></div><p>This will automatically generate a valid token for the gateway once you log in and add it to any request targeting a service behind the gateway.</p><p>Kargo can also automatically deploy for you krawler jobs, <a href="https://github.com/kalisio/kapture" target="_blank" rel="noreferrer">Kapture</a>, <a href="https://kalisio.github.io/geokoder/" target="_blank" rel="noreferrer">Geokoder</a>, <a href="https://github.com/kalisio/k2" target="_blank" rel="noreferrer">K2</a>, etc. as <a href="https://kalisio.github.io/kargo/guides/understanding-kargo.html#service" target="_blank" rel="noreferrer">services</a>.</p><h2 id="using-docker" tabindex="-1">Using Docker <a class="header-anchor" href="#using-docker" aria-label="Permalink to &quot;Using Docker&quot;">​</a></h2><p>As for Kano we provide Docker images on the <a href="https://hub.docker.com/r/kalisio/kano/" target="_blank" rel="noreferrer">Docker Hub</a> to ease deploying your own service instances. Although it&#39;s possible to directly run Docker commands we provide you with <a href="https://docs.docker.com/compose/" target="_blank" rel="noreferrer">docker-compose</a> files to ease deployment, in addition to minimalist configuration files. These files will be detailed in the following sections and are available in the <a href="https://github.com/kalisio/kano/tree/master/docs/.vitepress/public" target="_blank" rel="noreferrer">public folder</a> of the documentation.</p><h3 id="add-gateway" tabindex="-1">Add gateway <a class="header-anchor" href="#add-gateway" aria-label="Permalink to &quot;Add gateway&quot;">​</a></h3><p>The following commands and additional docker-compose file should do the job:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Run</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Gateway</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Kano</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">containers</span></span>
<span class="line"><span style="color:#B392F0;">docker-compose</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose-gateway.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">up</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span></span>
<span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Gateway</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Kano</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">containers</span></span>
<span class="line"><span style="color:#B392F0;">docker-compose</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose-gateway.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">down</span></span>
<span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Gateway</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Kano</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">containers</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">erasing</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DB</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">data</span></span>
<span class="line"><span style="color:#B392F0;">docker-compose</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose-gateway.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">down</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Run</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Gateway</span><span style="color:#24292E;"> </span><span style="color:#032F62;">and</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Kano</span><span style="color:#24292E;"> </span><span style="color:#032F62;">containers</span></span>
<span class="line"><span style="color:#6F42C1;">docker-compose</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose.yml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose-gateway.yml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">up</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span></span>
<span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Gateway</span><span style="color:#24292E;"> </span><span style="color:#032F62;">and</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Kano</span><span style="color:#24292E;"> </span><span style="color:#032F62;">containers</span></span>
<span class="line"><span style="color:#6F42C1;">docker-compose</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose.yml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose-gateway.yml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">down</span></span>
<span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Gateway</span><span style="color:#24292E;"> </span><span style="color:#032F62;">and</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Kano</span><span style="color:#24292E;"> </span><span style="color:#032F62;">containers</span><span style="color:#24292E;"> </span><span style="color:#032F62;">erasing</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DB</span><span style="color:#24292E;"> </span><span style="color:#032F62;">data</span></span>
<span class="line"><span style="color:#6F42C1;">docker-compose</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose.yml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose-gateway.yml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">down</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span></span></code></pre></div><details class="details custom-block"><summary>docker-compose-gateway.yml - Used to deploy gateway container.</summary><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;3.3&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D;">services</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">kano</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">environment</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">API_GATEWAY_URL=http://localhost:8082</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">gateway</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">kalisio/express-gateway:1.16.9</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">environment</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">KAPTURE_URL=http://kapture:3000</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">GEOKODER_URL=http://geokoder:8080</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">bind</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">source</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">./gateway.config.yml</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">target</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/var/lib/eg/gateway.config.yml</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">ports</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">&quot;8082:8080&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">networks</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">kano</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">version</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;3.3&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;">services</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">kano</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">environment</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">API_GATEWAY_URL=http://localhost:8082</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">gateway</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">kalisio/express-gateway:1.16.9</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">environment</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">KAPTURE_URL=http://kapture:3000</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">GEOKODER_URL=http://geokoder:8080</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">bind</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">source</span><span style="color:#24292E;">: </span><span style="color:#032F62;">./gateway.config.yml</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">target</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/var/lib/eg/gateway.config.yml</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">ports</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">&quot;8082:8080&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">networks</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">kano</span></span></code></pre></div></details><h3 id="add-kapture" tabindex="-1">Add kapture <a class="header-anchor" href="#add-kapture" aria-label="Permalink to &quot;Add kapture&quot;">​</a></h3><p>Kano integrates smoothly with <a href="https://github.com/kalisio/kapture" target="_blank" rel="noreferrer">Kapture</a> in order to perform customizable screenshots, i.e. map prints.</p><p>The following commands and additional docker-compose file should do the job:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Run</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Gateway,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Kapture</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Kano</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">containers</span></span>
<span class="line"><span style="color:#B392F0;">docker-compose</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose-gateway.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose-kapture.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">up</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span></span>
<span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Gateway,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Kapture</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Kano</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">containers</span></span>
<span class="line"><span style="color:#B392F0;">docker-compose</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose-gateway.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose-kapture.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">down</span></span>
<span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Gateway,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Kapture</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Kano</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">containers</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">erasing</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DB</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">data</span></span>
<span class="line"><span style="color:#B392F0;">docker-compose</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose-gateway.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose-kapture.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">down</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Run</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Gateway,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Kapture</span><span style="color:#24292E;"> </span><span style="color:#032F62;">and</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Kano</span><span style="color:#24292E;"> </span><span style="color:#032F62;">containers</span></span>
<span class="line"><span style="color:#6F42C1;">docker-compose</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose.yml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose-gateway.yml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose-kapture.yml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">up</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span></span>
<span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Gateway,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Kapture</span><span style="color:#24292E;"> </span><span style="color:#032F62;">and</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Kano</span><span style="color:#24292E;"> </span><span style="color:#032F62;">containers</span></span>
<span class="line"><span style="color:#6F42C1;">docker-compose</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose.yml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose-gateway.yml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose-kapture.yml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">down</span></span>
<span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Gateway,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Kapture</span><span style="color:#24292E;"> </span><span style="color:#032F62;">and</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Kano</span><span style="color:#24292E;"> </span><span style="color:#032F62;">containers</span><span style="color:#24292E;"> </span><span style="color:#032F62;">erasing</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DB</span><span style="color:#24292E;"> </span><span style="color:#032F62;">data</span></span>
<span class="line"><span style="color:#6F42C1;">docker-compose</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose.yml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose-gateway.yml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose-kapture.yml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">down</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span></span></code></pre></div><details class="details custom-block"><summary>docker-compose-kapture.yml - Used to deploy kapture container.</summary><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;3.3&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D;">services</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">kapture</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">kalisio/kapture:latest</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">environment</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">KANO_URL=http://kano:8081</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">KANO_JWT=eyJhbGciOiJIUzI1NiIsInR5cCI6ImFjY2VzcyJ9.eyJhdWQiOiJrYWxpc2lvIiwiaXNzIjoia2FsaXNpbyJ9._HslaK0hTlISw_wGkUJYmpZdcNuWWGB1iHJDApeJxWk</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">DEBUG=kapture*</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">ports</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">&quot;8083:3000&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">networks</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">kano</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">version</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;3.3&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;">services</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">kapture</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">kalisio/kapture:latest</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">environment</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">KANO_URL=http://kano:8081</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">KANO_JWT=eyJhbGciOiJIUzI1NiIsInR5cCI6ImFjY2VzcyJ9.eyJhdWQiOiJrYWxpc2lvIiwiaXNzIjoia2FsaXNpbyJ9._HslaK0hTlISw_wGkUJYmpZdcNuWWGB1iHJDApeJxWk</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">DEBUG=kapture*</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">ports</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">&quot;8083:3000&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">networks</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">kano</span></span></code></pre></div></details><h3 id="add-geokoder" tabindex="-1">Add geokoder <a class="header-anchor" href="#add-geokoder" aria-label="Permalink to &quot;Add geokoder&quot;">​</a></h3><p>Kano integrates smoothly with <a href="https://kalisio.github.io/geokoder/" target="_blank" rel="noreferrer">Geokoder</a> in order to perform geocoding.</p><p>The following commands and additional docker-compose file should do the job:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Run</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Gateway,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Geokoder</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Kano</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">containers</span></span>
<span class="line"><span style="color:#B392F0;">docker-compose</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose-gateway.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose-geokoder.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">up</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span></span>
<span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Gateway,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Geokoder</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Kano</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">containers</span></span>
<span class="line"><span style="color:#B392F0;">docker-compose</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose-gateway.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose-geokoder.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">down</span></span>
<span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Gateway,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Geokoder</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Kano</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">containers</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">erasing</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DB</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">data</span></span>
<span class="line"><span style="color:#B392F0;">docker-compose</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose-gateway.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose-geokoder.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">down</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Run</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Gateway,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Geokoder</span><span style="color:#24292E;"> </span><span style="color:#032F62;">and</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Kano</span><span style="color:#24292E;"> </span><span style="color:#032F62;">containers</span></span>
<span class="line"><span style="color:#6F42C1;">docker-compose</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose.yml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose-gateway.yml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose-geokoder.yml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">up</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span></span>
<span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Gateway,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Geokoder</span><span style="color:#24292E;"> </span><span style="color:#032F62;">and</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Kano</span><span style="color:#24292E;"> </span><span style="color:#032F62;">containers</span></span>
<span class="line"><span style="color:#6F42C1;">docker-compose</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose.yml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose-gateway.yml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose-geokoder.yml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">down</span></span>
<span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Gateway,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Geokoder</span><span style="color:#24292E;"> </span><span style="color:#032F62;">and</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Kano</span><span style="color:#24292E;"> </span><span style="color:#032F62;">containers</span><span style="color:#24292E;"> </span><span style="color:#032F62;">erasing</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DB</span><span style="color:#24292E;"> </span><span style="color:#032F62;">data</span></span>
<span class="line"><span style="color:#6F42C1;">docker-compose</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose.yml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose-gateway.yml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose-geokoder.yml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">down</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span></span></code></pre></div><details class="details custom-block"><summary>docker-compose-geokoder.yml - Used to deploy geokoder container.</summary><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;3.3&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D;">services</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">geokoder</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">kalisio/geokoder:latest</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">environment</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">DEBUG=geokoder*</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">bind</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">source</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">./local-geokoder.cjs</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">target</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/geokoder/config/local.cjs</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">ports</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">&quot;8084:8080&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">networks</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">kano</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">version</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;3.3&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;">services</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">geokoder</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">kalisio/geokoder:latest</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">environment</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">DEBUG=geokoder*</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">bind</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">source</span><span style="color:#24292E;">: </span><span style="color:#032F62;">./local-geokoder.cjs</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">target</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/geokoder/config/local.cjs</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">ports</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">&quot;8084:8080&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">networks</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">kano</span></span></code></pre></div></details><h3 id="add-k2" tabindex="-1">Add k2 <a class="header-anchor" href="#add-k2" aria-label="Permalink to &quot;Add k2&quot;">​</a></h3><p><strong>Coming soon</strong></p><h2 id="from-source-code" tabindex="-1">From source code <a class="header-anchor" href="#from-source-code" aria-label="Permalink to &quot;From source code&quot;">​</a></h2><p>First you have to ensure the <a href="https://kalisio.github.io/kdk/guides/development/setup.html#prerequisites" target="_blank" rel="noreferrer">KDK prerequisites</a> to run services from source code.</p><h3 id="add-gateway-1" tabindex="-1">Add gateway <a class="header-anchor" href="#add-gateway-1" aria-label="Permalink to &quot;Add gateway&quot;">​</a></h3><p>As the goal here is not to test, inspect or develop the gateway itself, but rather the underlying services, we will run the gateway using a Docker container in <code>host</code> network mode to ensure it can access services deployed on your <code>localhost</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--name=</span><span style="color:#9ECBFF;">&quot;gateway&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--network=</span><span style="color:#9ECBFF;">&quot;host&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--rm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--init</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-it</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;PORT=8082&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;KAPTURE_URL=http://localhost:8083&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;GEOKODER_URL=http://localhost:8084&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--mount</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">type=bind,source=./gateway.config.yml,target=/var/lib/eg/gateway.config.yml,readonly</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kalisio/express-gateway:1.16.9</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--name=</span><span style="color:#032F62;">&quot;gateway&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--network=</span><span style="color:#032F62;">&quot;host&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--rm</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--init</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-it</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-e</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;PORT=8082&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-e</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;KAPTURE_URL=http://localhost:8083&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-e</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;GEOKODER_URL=http://localhost:8084&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--mount</span><span style="color:#24292E;"> </span><span style="color:#032F62;">type=bind,source=./gateway.config.yml,target=/var/lib/eg/gateway.config.yml,readonly</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kalisio/express-gateway:1.16.9</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>To get details about the <code>gateway.config.yml</code> file used to deploy gateway container please refer to the previous Docker-based section.</p></div><p>After launching the gateway change the following environment variables before launching the Kano backend:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Setup</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">target</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gateway</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> API_GATEWAY_URL</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;http://localhost:8082&quot;</span></span>
<span class="line"><span style="color:#B392F0;">yarn</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dev</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Setup</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">target</span><span style="color:#24292E;"> </span><span style="color:#032F62;">gateway</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> API_GATEWAY_URL</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;http://localhost:8082&quot;</span></span>
<span class="line"><span style="color:#6F42C1;">yarn</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dev</span></span></code></pre></div><h3 id="add-kapture-1" tabindex="-1">Add kapture <a class="header-anchor" href="#add-kapture-1" aria-label="Permalink to &quot;Add kapture&quot;">​</a></h3><p>Once Kano and the gateway are running, the following commands should launch your local instance of Kapture:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Clone</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Kapture</span></span>
<span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clone</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/kalisio/geokoder.git</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">geokoder</span></span>
<span class="line"><span style="color:#B392F0;">yarn</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">most</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">minimalist</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">environment</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">server</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> PORT</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;8083&quot;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> NODE_OPTIONS</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;--inspect-port=9233&quot;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> KANO_URL</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;http://localhost:8080&quot;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> KANO_JWT</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6ImFjY2VzcyJ9.eyJhdWQiOiJrYWxpc2lvIiwiaXNzIjoia2FsaXNpbyJ9._HslaK0hTlISw_wGkUJYmpZdcNuWWGB1iHJDApeJxWk&quot;</span></span>
<span class="line"><span style="color:#B392F0;">yarn</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dev</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Clone</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Kapture</span></span>
<span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clone</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/kalisio/geokoder.git</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">geokoder</span></span>
<span class="line"><span style="color:#6F42C1;">yarn</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Set</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">most</span><span style="color:#24292E;"> </span><span style="color:#032F62;">minimalist</span><span style="color:#24292E;"> </span><span style="color:#032F62;">environment</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#032F62;">server</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> PORT</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;8083&quot;</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> NODE_OPTIONS</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;--inspect-port=9233&quot;</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> KANO_URL</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;http://localhost:8080&quot;</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> KANO_JWT</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6ImFjY2VzcyJ9.eyJhdWQiOiJrYWxpc2lvIiwiaXNzIjoia2FsaXNpbyJ9._HslaK0hTlISw_wGkUJYmpZdcNuWWGB1iHJDApeJxWk&quot;</span></span>
<span class="line"><span style="color:#6F42C1;">yarn</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dev</span></span></code></pre></div><h3 id="add-geokoder-1" tabindex="-1">Add geokoder <a class="header-anchor" href="#add-geokoder-1" aria-label="Permalink to &quot;Add geokoder&quot;">​</a></h3><p>Once Kano and the gateway is running, the following commands should launch your local instance of Geokoder:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Clone</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Geokoder</span></span>
<span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clone</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/kalisio/geokoder.git</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">geokoder</span></span>
<span class="line"><span style="color:#B392F0;">yarn</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Copy</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">local</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">configuration</span><span style="color:#E1E4E8;"> (see </span><span style="color:#9ECBFF;">previous</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Docker-based</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployment</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">section</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#B392F0;">cp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">local-geokoder.cjs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">./config/local.cjs</span></span>
<span class="line"><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">most</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">minimalist</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">environment</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">server</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> PORT</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;8084&quot;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> NODE_OPTIONS</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;--inspect-port=9234&quot;</span></span>
<span class="line"><span style="color:#B392F0;">yarn</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dev</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Clone</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Geokoder</span></span>
<span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clone</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/kalisio/geokoder.git</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">geokoder</span></span>
<span class="line"><span style="color:#6F42C1;">yarn</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Copy</span><span style="color:#24292E;"> </span><span style="color:#032F62;">local</span><span style="color:#24292E;"> </span><span style="color:#032F62;">configuration</span><span style="color:#24292E;"> (see </span><span style="color:#032F62;">previous</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Docker-based</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployment</span><span style="color:#24292E;"> </span><span style="color:#032F62;">section</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6F42C1;">cp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">local-geokoder.cjs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">./config/local.cjs</span></span>
<span class="line"><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Set</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">most</span><span style="color:#24292E;"> </span><span style="color:#032F62;">minimalist</span><span style="color:#24292E;"> </span><span style="color:#032F62;">environment</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#032F62;">server</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> PORT</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;8084&quot;</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> NODE_OPTIONS</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;--inspect-port=9234&quot;</span></span>
<span class="line"><span style="color:#6F42C1;">yarn</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dev</span></span></code></pre></div><h3 id="add-k2-1" tabindex="-1">Add k2 <a class="header-anchor" href="#add-k2-1" aria-label="Permalink to &quot;Add k2&quot;">​</a></h3><p><strong>Coming soon</strong></p>`,42),e=[p];function t(c,r,y,E,i,F){return a(),n("div",null,e)}const h=s(l,[["render",t]]);export{C as __pageData,h as default};
